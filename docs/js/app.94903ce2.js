(function(e){function t(t){for(var o,r,i=t[0],s=t[1],u=t[2],l=0,p=[];l<i.length;l++)r=i[l],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&p.push(a[r][0]),a[r]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);d&&d(t);while(p.length)p.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],o=!0,r=1;r<n.length;r++){var s=n[r];0!==a[s]&&(o=!1)}o&&(c.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},a={app:0},c=[];function r(e){return i.p+"js/"+({about:"about"}[e]||e)+"."+{about:"edde3e46"}[e]+".js"}function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n=a[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise((function(t,o){n=a[e]=[t,o]}));t.push(n[2]=o);var c,s=document.createElement("script");s.charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=r(e);var u=new Error;c=function(t){s.onerror=s.onload=null,clearTimeout(l);var n=a[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),c=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+o+": "+c+")",u.name="ChunkLoadError",u.type=o,u.request=c,n[1](u)}a[e]=void 0}};var l=setTimeout((function(){c({type:"timeout",target:s})}),12e4);s.onerror=s.onload=c,document.head.appendChild(s)}return Promise.all(t)},i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/maps-vue-app/",i.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var d=u;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},1241:function(e,t,n){"use strict";n("8886")},2488:function(e,t,n){"use strict";n("7936")},4633:function(e,t,n){"use strict";n("7b8c")},4789:function(e,t,n){"use strict";n("b2ed")},6321:function(e,t,n){},6450:function(e,t,n){"use strict";n("6321")},7936:function(e,t,n){},"7b8c":function(e,t,n){},8886:function(e,t,n){},a71f:function(e,t,n){},b2ed:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);var o=n("7a23");function a(e,t){const n=Object(o["C"])("router-view");return Object(o["v"])(),Object(o["d"])(n)}n("1241");var c=n("6b0d"),r=n.n(c);const i={},s=r()(i,[["render",a]]);var u=s,l=n("6c02"),d={class:"HomeView"};function p(e,t,n,a,c,r){var i=Object(o["C"])("MapVioew"),s=Object(o["C"])("SearchBar"),u=Object(o["C"])("TripDetails"),l=Object(o["C"])("MyLocationBtn");return Object(o["v"])(),Object(o["f"])("div",d,[Object(o["j"])(i),Object(o["j"])(s),Object(o["j"])(u),Object(o["j"])(l)])}var f={key:0,class:"isLoading"},b={class:"map-container",ref:"mapRef"};function v(e,t,n,a,c,r){var i=Object(o["C"])("Spinner");return Object(o["v"])(),Object(o["f"])(o["a"],null,[e.isUserLocationReady?Object(o["e"])("",!0):(Object(o["v"])(),Object(o["f"])("div",f,[Object(o["j"])(i,{class:"spinner",size:"150px",color:"#000000"})])),Object(o["J"])(Object(o["g"])("div",b,null,512),[[o["H"],e.isUserLocationReady]])],64)}var j=n("9ab4"),m=n("5502"),O=function(){var e=Object(m["b"])();return Object(o["t"])((function(){e.getters["places/isUserLocationReady"]||(e.dispatch("places/getInitialLocation"),console.log(e))})),console.log(e.getters),{isLoading:Object(o["b"])((function(){return e.state.places.isLoading})),isLoadingPlaces:Object(o["b"])((function(){return e.state.places.isLoadingPlaces})),places:Object(o["b"])((function(){return e.state.places.places})),getPlaceSelected:Object(o["b"])((function(){return e.state.places.placeSelected})),userLocation:Object(o["b"])((function(){return e.state.places.userLocation})),isUserLocationReady:Object(o["b"])((function(){return e.getters["places/isUserLocationReady"]})),setPlaceSelected:function(t){return e.commit("places/setPlaceSelected",t)},searchPlaces:function(t){return e.dispatch("places/searchPlaces",t)}}},g=function(){var e=Object(m["b"])();return{map:Object(o["b"])((function(){return e.state.map.map})),distance:Object(o["b"])((function(){return e.state.map.distance})),duration:Object(o["b"])((function(){return e.state.map.duration})),profile:Object(o["b"])((function(){return e.state.map.profile})),isLoadingRoute:Object(o["b"])((function(){return e.state.map.isLoadingRoute})),isMapReady:Object(o["b"])((function(){return e.getters["map/isMapReady"]})),setMap:function(t){return e.commit("map/setMap",t)},setPlacesMarket:function(t){return e.commit("map/setPlacesMarket",t)},getRouteBetweenPoints:function(t,n,o){return e.dispatch("map/getRouteBetweenPoints",{start:t,end:n,profile:o})}}},y=n("d58b"),h=n("e192"),L=n.n(h),R=Object(o["k"])({name:"MapView",components:{Spinner:y["b"]},setup:function(){var e=this,t=Object(o["A"])(),n=O(),a=n.userLocation,c=n.isUserLocationReady,r=g().setMap,i=function(){return Object(j["a"])(e,void 0,void 0,(function(){var e,n;return Object(j["b"])(this,(function(o){switch(o.label){case 0:return t.value&&a?[4,Promise.resolve()]:[2];case 1:return o.sent(),e=new L.a.Map({container:t.value,style:"mapbox://styles/mapbox/dark-v10",center:a.value,zoom:15}),n=(new L.a.Popup).setLngLat(a.value?a.value:[0,0]).setHTML('<p style="color: #000">You are here</p>'),(new L.a.Marker).setLngLat(a.value?a.value:[0,0]).setPopup(n).addTo(e),r(e),[2]}}))}))};return Object(o["t"])((function(){if(c.value)return i()})),Object(o["I"])(c,(function(e){console.log({newVal:e}),c&&i()}),{immediate:!0}),{isUserLocationReady:c,mapRef:t}}});n("4789");const P=r()(R,[["render",v]]);var k=P,w={class:"searchbar-container"};function I(e,t,n,a,c,r){var i=Object(o["C"])("SearchResults");return Object(o["v"])(),Object(o["f"])("div",w,[e.isButtonReady?Object(o["J"])((Object(o["v"])(),Object(o["f"])("input",{key:0,class:"form-control",type:"text",placeholder:"Search","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.searchQuery=t})},null,512)),[[o["G"],e.searchQuery]]):Object(o["e"])("",!0),Object(o["j"])(i)])}var C={key:0,class:"spinner-container"},S={key:1,class:"list-group mt-3"},M=["onClick"],B={class:"title-place"},U={class:"description-place"},x={class:"container-btn"},T=["onClick"];function H(e,t,n,a,c,r){var i=Object(o["C"])("Spinner"),s=Object(o["C"])("font-awesome-icon");return e.isLoadingPlaces?(Object(o["v"])(),Object(o["f"])("div",C,[Object(o["j"])(i,{class:"spinner",size:"40px",color:"red"})])):e.places.length>0?(Object(o["v"])(),Object(o["f"])("ul",S,[(Object(o["v"])(!0),Object(o["f"])(o["a"],null,Object(o["B"])(e.places,(function(t){return Object(o["v"])(),Object(o["f"])("li",{key:t.id,class:Object(o["p"])("list-group-item list-group-item-action "+(t.id===e.activePlace?"active":"")),onClick:function(n){return e.onClickPlace(t)}},[Object(o["g"])("p",B,Object(o["E"])(t.text),1),Object(o["g"])("p",U,Object(o["E"])(t.place_name),1),Object(o["g"])("div",x,[Object(o["g"])("p",null,[Object(o["g"])("a",{onClick:function(n){return e.onClickDirection(t)}},[Object(o["j"])(s,{icon:["fa","arrow-right"],class:"icon alt"})],8,T)])])],10,M)})),128))])):Object(o["e"])("",!0)}var _,A=n("bc3a"),N=n.n(A),Y="https://api.mapbox.com/geocoding/v5/mapbox.places",D=N.a.create({baseURL:Y,params:{access_token:"pk.eyJ1Ijoib3NjYXJyYXlnb3phIiwiYSI6ImNsMHlkZGphbTF6dHUzY3Brdjh4bW80c3EifQ.129PXQKAXa2Ls5UFHH5Rog",language:"es",limit:3}}),E=D,G="https://api.mapbox.com/directions/v5/mapbox",F=N.a.create({baseURL:G,params:{access_token:"pk.eyJ1Ijoib3NjYXJyYXlnb3phIiwiYSI6ImNsMHlkZGphbTF6dHUzY3Brdjh4bW80c3EifQ.129PXQKAXa2Ls5UFHH5Rog",alternatives:!1,geometries:"geojson",overview:"simplified",steps:!1}}),V=F;(function(e){e["TRAFFIC"]="traffic",e["DRIVING"]="driving",e["WALKING"]="walking",e["CYCLING"]="cycling"})(_||(_={}));var X={getRouteBetweenPoints:function(e,t){var n=e.commit,o=t.start,a=t.end,c=t.profile;return Object(j["a"])(this,void 0,void 0,(function(){return Object(j["b"])(this,(function(e){switch(e.label){case 0:return n("setIsLoadingRoute",!0),[4,V.get("/"+c+"/"+o.join(",")+";"+a.join(",")).then((function(e){var t=e.data.routes[0].geometry.coordinates,o=e.data.routes[0].distance,a=e.data.routes[0].duration;n("setIsLoadingRoute",!1),n("setDistanceDurationRoute",{distance:o,duration:a,profile:c}),n("setRoutePolyline",t)}))];case 1:return e.sent(),[2]}}))}))}},J=X,z=n("ecee"),Q=n("c074"),K=n("ad3d");z["c"].add(Q["a"]);var W=Object(o["k"])({name:"SearchResults",components:{FontAwesomeIcon:K["a"],Spinner:y["c"]},setup:function(){var e=O(),t=e.isUserLocationReady,n=e.isLoadingPlaces,a=e.places,c=e.userLocation,r=e.setPlaceSelected,i=g(),s=i.setPlacesMarket,u=i.getRouteBetweenPoints,l=i.map,d=i.isMapReady,p=Object(o["A"])("");return Object(o["I"])(a,(function(e){p.value="",console.log(e),s(e)})),{isButtonReady:Object(o["b"])((function(){return t.value&&d.value})),onClickPlace:function(e){var t,n=e.center,o=n[0],a=n[1];null===(t=l.value)||void 0===t||t.flyTo({center:[o,a],zoom:15})},onClickDirection:function(e){if(!c.value)throw new Error("User location is not ready!");var t=e.center,n=t[0],o=t[1],a=c.value,i=a[0],s=a[1],l=[i,s],d=[n,o];r(e),u(l,d,_.DRIVING)},isLoadingPlaces:n,places:a,activePlace:p}}});n("f91c");const Z=r()(W,[["render",H],["__scopeId","data-v-72b73664"]]);var q=Z,$=Object(o["k"])({name:"SearchBar",components:{FontAwesomeIcon:K["a"],SearchResults:q},setup:function(){var e=O(),t=e.isUserLocationReady,n=e.searchPlaces,a=g().isMapReady,c=Object(o["A"])(),r=Object(o["A"])();return{isButtonReady:Object(o["b"])((function(){return t.value&&a.value})),onClick:function(){console.log("click search bar")},searchQuery:Object(o["b"])({get:function(){return r.value},set:function(e){c.value&&clearTimeout(c.value),c.value=setTimeout((function(){r.value=e,n(r.value)}),500)}})}}});n("4633");const ee=r()($,[["render",I],["__scopeId","data-v-027ef175"]]);var te=ee;function ne(e,t,n,a,c,r){var i=Object(o["C"])("font-awesome-icon");return e.isButtonReady?(Object(o["v"])(),Object(o["f"])("a",{key:0,href:"#",onClick:t[0]||(t[0]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.onClick&&e.onClick.apply(e,t)})},[Object(o["j"])(i,{icon:["fa","location-crosshairs"],class:"icon alt"})])):Object(o["e"])("",!0)}z["c"].add(Q["d"]);var oe=Object(o["k"])({name:"MyLoactionBtn",components:{FontAwesomeIcon:K["a"]},setup:function(){var e=O(),t=e.userLocation,n=e.isUserLocationReady,a=g(),c=a.map,r=a.isMapReady;return{isButtonReady:Object(o["b"])((function(){return n.value&&r.value})),onClick:function(){var e;null===(e=c.value)||void 0===e||e.flyTo({center:t.value,zoom:15})}}}});n("2488");const ae=r()(oe,[["render",ne],["__scopeId","data-v-f4c0b7a8"]]);var ce=ae,re={key:0},ie={key:1,class:"trip-container"},se={class:"column"},ue={class:"column"},le=Object(o["i"])(" Distance: "),de={class:"column"},pe=Object(o["i"])(" Duration: ");function fe(e,t,n,a,c,r){var i=Object(o["C"])("Spinner"),s=Object(o["C"])("font-awesome-icon");return e.isLoadingRoute?(Object(o["v"])(),Object(o["f"])("div",re,[Object(o["j"])(i,{class:"spinner",size:"50px",background:"#09f"})])):e.distance&&e.duration&&e.profile?(Object(o["v"])(),Object(o["f"])("div",ie,[Object(o["g"])("div",se,[Object(o["g"])("a",{class:Object(o["p"])("move-btn "+(e.profile===e.Profile.DRIVING?"active":"")),onClick:t[0]||(t[0]=function(t){return e.handleClick(e.Profile.DRIVING)})},[Object(o["j"])(s,{icon:["fa","car"],class:"icon alt"})],2),Object(o["g"])("a",{class:Object(o["p"])("move-btn "+(e.profile===e.Profile.CYCLING?"active":"")),onClick:t[1]||(t[1]=function(t){return e.handleClick(e.Profile.CYCLING)})},[Object(o["j"])(s,{icon:["fa","bicycle"],class:"icon alt"})],2),Object(o["g"])("a",{class:Object(o["p"])("move-btn "+(e.profile===e.Profile.WALKING?"active":"")),onClick:t[2]||(t[2]=function(t){return e.handleClick(e.Profile.WALKING)})},[Object(o["j"])(s,{icon:["fa","person-walking"],class:"icon alt"})],2)]),Object(o["g"])("div",ue,[le,Object(o["g"])("b",null,Object(o["E"])(e.distance)+" Km",1)]),Object(o["g"])("div",de,[pe,Object(o["g"])("b",null,Object(o["E"])(e.duration>60?e.duration/60+" hr":e.duration+" min"),1)])])):Object(o["e"])("",!0)}z["c"].add(Q["d"],Q["c"],Q["e"],Q["b"],Q["f"]);var be=Object(o["k"])({name:"TripDetails",components:{FontAwesomeIcon:K["a"],Spinner:y["a"]},setup:function(){var e=O(),t=e.isUserLocationReady,n=e.userLocation,a=e.getPlaceSelected,c=g(),r=c.duration,i=c.distance,s=c.profile,u=c.isMapReady,l=c.getRouteBetweenPoints,d=c.isLoadingRoute;return{isButtonReady:Object(o["b"])((function(){return t.value&&u.value})),handleClick:function(e){var t;if(n.value){if(!a.value)throw new Error("No esta seleccionada ni una ruta 🚴");var o=null===(t=a.value)||void 0===t?void 0:t.center,c=o[0],r=o[1],i=n.value,s=i[0],u=i[1],d=[s,u],p=[c,r];l(d,p,e)}},distance:i,duration:r,Profile:_,profile:s,isLoadingRoute:d}}});n("6450");const ve=r()(be,[["render",fe],["__scopeId","data-v-201b724e"]]);var je=ve,me=Object(o["k"])({name:"HomeView",components:{MapVioew:k,SearchBar:te,MyLocationBtn:ce,TripDetails:je},setup:function(){O()}});const Oe=r()(me,[["render",p]]);var ge=Oe,ye=[{path:"/",name:"HomeView",component:ge},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}}],he=Object(l["a"])({history:Object(l["b"])(),routes:ye}),Le=he;function Re(){return{isLoading:!0,isLoadingPlaces:!1,places:[],userLocation:void 0,placeSelected:void 0}}var Pe=Re,ke={getInitialLocation:function(e){var t=e.commit;navigator.geolocation.getCurrentPosition((function(e){var n=e.coords;console.log({coords:n}),t("setInitialLocation",{lng:n.longitude,lat:n.latitude})}))},searchPlaces:function(e,t){var n=e.commit,o=e.state;return Object(j["a"])(this,void 0,Promise,(function(){var e;return Object(j["b"])(this,(function(a){switch(a.label){case 0:if(console.log("vuex: ",t),t.length<3)return n("setPlaces",[]),[2,[]];if(!o.userLocation)throw new Error("userLocation is not ready");return n("setIsLoadingPlaces"),[4,E.get("/"+t+".json",{params:{proximity:o.userLocation[0]+","+o.userLocation[1],types:"postcode,poi,place,region,locality,address,country,district"}})];case 1:return e=a.sent(),n("setPlaces",e.data.features),[2,e.data.features]}}))}))}},we=ke,Ie={isUserLocationReady:function(e){return!!e.userLocation}},Ce=Ie,Se={setInitialLocation:function(e,t){var n=t.lng,o=t.lat;e.userLocation=[n,o]},setIsLoadingPlaces:function(e){e.isLoadingPlaces=!0},setPlaces:function(e,t){e.places=t,e.isLoadingPlaces=!1},setPlaceSelected:function(e,t){e.placeSelected=t}},Me=Se,Be={namespaced:!0,actions:we,getters:Ce,mutations:Me,state:Pe},Ue=Be;function xe(){return{map:void 0,markers:[],distance:void 0,duration:void 0,profile:void 0,isLoadingRoute:!1}}var Te=xe,He={isMapReady:function(e){return!!e.map}},_e=He,Ae={setMap:function(e,t){e.map=t},setIsLoadingRoute:function(e,t){e.isLoadingRoute=t},setDistanceDurationRoute:function(e,t){var n=t.distance,o=t.duration,a=t.profile,c=n/1e3;c=Math.round(100*c),c/=100,e.distance=c,e.profile=a,e.duration=Math.floor(o/60)},setPlacesMarket:function(e,t){if(e.map){e.markers.forEach((function(e){return e.remove()})),e.markers=[];for(var n=0,o=t;n<o.length;n++){var a=o[n],c=a.center,r=c[0],i=c[1],s=(new L.a.Popup).setLngLat([r,i]).setHTML('<p style="color: #000">'+a.text+"<br/>"+a.place_name+"</p>"),u=(new L.a.Marker).setLngLat([r,i]).setPopup(s).addTo(e.map);e.markers.push(u)}e.map.getLayer("RouteString")&&(e.map.removeLayer("RouteString"),e.map.removeSource("RouteString"),e.distance=void 0,e.profile=void 0,e.duration=void 0)}},setRoutePolyline:function(e,t){for(var n,o,a,c,r=t[0],i=new L.a.LngLatBounds([r[0],r[1]],[r[0],r[1]]),s=0,u=t;s<u.length;s++){var l=u[s],d=[l[0],l[1]];i.extend(d)}null===(n=e.map)||void 0===n||n.fitBounds(i,{padding:100});var p={type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:t}}]}};(null===(o=e.map)||void 0===o?void 0:o.getLayer("RouteString"))&&(e.map.removeLayer("RouteString"),e.map.removeSource("RouteString")),null===(a=e.map)||void 0===a||a.addSource("RouteString",p),null===(c=e.map)||void 0===c||c.addLayer({id:"RouteString",type:"line",source:"RouteString",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#0099ff","line-width":5}})}},Ne=Ae,Ye={namespaced:!0,actions:J,getters:_e,mutations:Ne,state:Te},De=Ye,Ee=Object(m["a"])({modules:{places:Ue,map:De}});if(L.a.accessToken="pk.eyJ1Ijoib3NjYXJyYXlnb3phIiwiYSI6ImNsMHlkZGphbTF6dHUzY3Brdjh4bW80c3EifQ.129PXQKAXa2Ls5UFHH5Rog",!navigator.geolocation)throw new Error("Geolocation is not supported by your browser.");Object(o["c"])(u).use(Ee).use(Le).mount("#app")},f91c:function(e,t,n){"use strict";n("a71f")}});
//# sourceMappingURL=app.94903ce2.js.map